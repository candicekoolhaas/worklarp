<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>work LARP</title>
  <style>
    body {
      background-image: url("background.jpg");
      background-size: cover;       /* makes it fill the screen */
      background-repeat: no-repeat; /* donâ€™t tile it */
      background-position: center;  /* center the image */
      font-family: "Times New Roman", Times, serif;
      text-align: center;
      margin-top: 50px;
    }

    .button-row {
      display: flex;
      align-items: flex-start;
      justify-content: flex-start;
      margin: 20px 0;
    }

    .btn {
      border: none;
      background: none;
      cursor: pointer;
      margin: 0;
    }

    .btn img {
      width: 100px;
    }

    .label {
      margin: 0;
      font-size: 1.1em;
      color: #333;
    }

    .label-container {
      display: flex;          /* lay label and score in a row */
      align-items: center;    /* vertically align them */
      margin-left: 4px;      /* space from the button */
      gap: 10px;	 /* space between label and score */
      margin-top: 10px;
      max-width: 50%;              
    }

    .score {
      font-size: 1.1em;
      color: #555;
      margin: 0;            /* remove any margin */
      line-height: 1;       /* force it to align with label text */
    }

    .description {
      font-size: 0.85em;        /* smaller text */
      color: #444;
      line-height: 1.3;
      word-wrap: break-word;     /* wrap text nicely */
    }

    .label-score {
      display: flex;
      align-items: center;      /* label and score horizontally aligned */
      gap: 10px;
      margin-bottom: 5px;       /* space between score row and description */
    }
  </style>
</head>
<body>
  <h1>work LARP</h1>

  <!-- Avatar -->
  <img src="avatar.jpg" alt="Avatar" width="50"><br><br>

<!-- Login -->
<div id="loginDiv">
  <input type="text" id="passcodeInput" placeholder="Enter username">
  <button id="loginBtn">Login</button>
</div>

<!-- Display username -->
<div id="usernameDisplay" style="margin:10px; font-weight:bold;"></div>

  <!-- Restoration -->
<div class="button-row">
  <button class="btn" onclick="addPoints('Restoration', 1)">
    <img src="button1.jpg" alt="Button 1">
  </button>
  <div class="label-container">
   <div class="label-score">
    <div class="label">Restoration</div>
    <div id="Restorationscore">0</div>
 </div>
 <div class="description">
      Brainstorming new ideas or theories restores health and vigor. 
    </div>
  </div>
</div>

  <!-- Alchemy -->
<div class="button-row">
  <button class="btn" onclick="addPoints('Alchemy', 1)">
    <img src="button2.jpg" alt="Button 2">
  </button>
  <div class="label-container">
   <div class="label-score">
    <div class="label">Alchemy</div>
    <div id="AlchemyScore">0</div>
 </div>
 <div class="description">
      Through practicing or learning mathematics, you uncover the alchemical properties of the universe. 
    </div>
  </div>
</div>

<!-- Conjuration -->
<div class="button-row">
  <button class="btn" onclick="addPoints('Conjuration', 1)">
    <img src="button3.jpg" alt="Button 3">
  </button>
  <div class="label-container">
   <div class="label-score">
    <div class="label">Conjuration</div>
    <div id="ConjurationScore">0</div>
 </div>
 <div class="description">
      Statistical golems, demons, and other entities can be conjured through modeling or simulating data. 
    </div>
  </div>
</div>

<!-- Intelligence -->
<div class="button-row">
  <button class="btn" onclick="addPoints('Intelligence', 1)">
    <img src="button4.jpg" alt="Button 4">
  </button>
  <div class="label-container">
   <div class="label-score">
    <div class="label">Intelligence</div>
    <div id="IntelligenceScore">0</div>
 </div>
 <div class="description">
      Reading magical or ancient texts increases intelligence. 
    </div>
  </div>
</div>

<!-- Willpower -->
<div class="button-row">
  <button class="btn" onclick="addPoints('Willpower', 1)">
    <img src="button5.jpg" alt="Button 5">
  </button>
  <div class="label-container">
   <div class="label-score">
    <div class="label">Willpower</div>
    <div id="WillpowerScore">0</div>
 </div>
 <div class="description">
      Creating new knowledge through writing increases your divine Willpower. 
    </div>
  </div>
</div>

<!-- Agility -->
<div class="button-row">
  <button class="btn" onclick="addPoints('Agility', 1)">
    <img src="button6.jpg" alt="Button 6">
  </button>
  <div class="label-container">
   <div class="label-score">
    <div class="label">Agility</div>
    <div id="AgilityScore">0</div>
 </div>
 <div class="description">
      Maintaining different projects and skills and being timely and responsible increases agility.
    </div>
  </div>
</div>

<!-- Speed -->
<div class="button-row">
  <button class="btn" onclick="addPoints('Speed', 1)">
    <img src="button7.jpg" alt="Button 7">
  </button>
  <div class="label-container">
   <div class="label-score">
    <div class="label">Speed</div>
    <div id="SpeedScore">0</div>
 </div>
 <div class="description">
      Completing all tasks assigned for the day increases speed. 
    </div>
  </div>
</div>

<!-- Endurance -->
<div class="button-row">
  <button class="btn" onclick="addPoints('Endurance', 1)">
    <img src="button8.jpg" alt="Button 8">
  </button>
  <div class="label-container">
   <div class="label-score">
    <div class="label">Endurance</div>
    <div id="EnduranceScore">0</div>
 </div>
 <div class="description">
      Practicing or learning a programming language increases magical endurance.
    </div>
  </div>
</div>

<!-- Personality -->
<div class="button-row">
  <button class="btn" onclick="addPoints('Personality', 1)">
    <img src="button9.jpg" alt="Button 9">
  </button>
  <div class="label-container">
   <div class="label-score">
    <div class="label">Personality</div>
    <div id="PersonalityScore">0</div>
 </div>
 <div class="description">
      Networking or connecting with other mages increases personality.
    </div>
  </div>
</div>

<!-- Luck -->
<div class="button-row">
  <button class="btn" onclick="addPoints('Luck', 1)">
    <img src="button10.jpg" alt="Button 10">
  </button>
  <div class="label-container">
   <div class="label-score">
    <div class="label">Luck</div>
    <div id="LuckScore">0</div>
 </div>
 <div class="description">
      Succesfully recruiting participants increases luck.
    </div>
  </div>
</div>

<!-- Alteration -->
<div class="button-row">
  <button class="btn" onclick="addPoints('Alteration', 1)">
    <img src="button11.jpg" alt="Button 11">
  </button>
  <div class="label-container">
   <div class="label-score">
    <div class="label">Alteration</div>
    <div id="AlterationScore">0</div>
 </div>
 <div class="description">
      Cleaning data or cleaning scripts increases your skills in alteration magic.
    </div>
  </div>
</div>

<!-- Athletics -->
<div class="button-row">
  <button class="btn" onclick="addPoints('Athletics', 1)">
    <img src="button12.jpg" alt="Button 12">
  </button>
  <div class="label-container">
   <div class="label-score">
    <div class="label">Athletics</div>
    <div id="AthleticsScore">0</div>
 </div>
 <div class="description">
      Doing cardiovascular exercises, yoga, or participating in sports activities increases your athletic ability.
    </div>
  </div>
</div>

<!-- Destruction -->
<div class="button-row">
  <button class="btn" onclick="addPoints('Destruction', 1)">
    <img src="button13.jpg" alt="Button 13">
  </button>
  <div class="label-container">
   <div class="label-score">
    <div class="label">Destruction</div>
    <div id="DestructionScore">0</div>
 </div>
 <div class="description">
      Presenting your work is like real-time practicing magic, so presenting or lecturing increases your destruction magic skill.
    </div>
  </div>
</div>

<!-- Illusion -->
<div class="button-row">
  <button class="btn" onclick="addPoints('Illusion', 1)">
    <img src="button14.jpg" alt="Button 14">
  </button>
  <div class="label-container">
   <div class="label-score">
    <div class="label">Illusion</div>
    <div id="IllusionScore">0</div>
 </div>
 <div class="description">
      Running participants succesfully in an experiment (which is a simulated or illusory testing environment, in a way) increases your illusion magic skill.
    </div>
  </div>
</div>

<!-- Mysticism -->
<div class="button-row">
  <button class="btn" onclick="addPoints('Mysticism', 1)">
    <img src="button15.jpg" alt="Button 15">
  </button>
  <div class="label-container">
   <div class="label-score">
    <div class="label">Mysticism</div>
    <div id="MysticismScore">0</div>
 </div>
 <div class="description">
      Analyzing or making statistical inferences increases your mysticism magic skill, as you are looking into the future. 
    </div>
  </div>
</div>

<!-- Charisma -->
<div class="button-row">
  <button class="btn" onclick="addPoints('Charisma', 1)">
    <img src="button16.jpg" alt="Button 16">
  </button>
  <div class="label-container">
   <div class="label-score">
    <div class="label">Charisma</div>
    <div id="CharismaScore">0</div>
 </div>
 <div class="description">
      Science communication efforts or recruiting families to join the mailing list increases charisma. 
    </div>
  </div>
</div>

<!-- Energy -->
<div class="button-row">
  <button class="btn" onclick="addPoints('Energy', 1)">
    <img src="button17.jpg" alt="Button 17">
  </button>
  <div class="label-container">
   <div class="label-score">
    <div class="label">Energy</div>
    <div id="EnergyScore">0</div>
 </div>
 <div class="description">
      Embracing childlike energy, being kind to others, or volunteering time for benevolent causes increases positive energy. 
    </div>
  </div>
</div>

<button onclick="resetScores()">Reset</button>

<script type="module">
  import { initializeApp } from "https://www.gstatic.com/firebasejs/11.0.1/firebase-app.js";
  import { getFirestore, doc, getDoc, setDoc } from "https://www.gstatic.com/firebasejs/11.0.1/firebase-firestore.js";

  // âœ… Firebase config (fixed storageBucket)
  const firebaseConfig = {
    apiKey: "AIzaSyBUGoQLFbEwsizDNbNrGF0YHyc1yw-SSuo",
    authDomain: "worklarp.firebaseapp.com",
    projectId: "worklarp",
    storageBucket: "worklarp.appspot.com",
    messagingSenderId: "909526822561",
    appId: "1:909526822561:web:66b48f5dce174d1fca8ae0"
  };

  const app = initializeApp(firebaseConfig);
  const db = getFirestore(app);

  let scores = {
    Restoration: 0,
    Alchemy: 0,
    Conjuration: 0,
    Strength: 0,
    Intelligence: 0,
    Willpower: 0,
    Agility: 0,
    Speed: 0,
    Endurance: 0,
    Personality: 0,
    Luck: 0,
    Alteration: 0,
    Athletics: 0,
    Illusion: 0,
    Destruction: 0,
    Mysticism: 0,
    Charisma: 0,
    Energy: 0
  };

  let currentPasscode = "";

  const buttons = document.querySelectorAll(".btn");
  const resetBtn = document.getElementById("resetBtn");

  // Enable buttons after login
  function enableButtons() {
    buttons.forEach(b => b.disabled = false);
    resetBtn.disabled = false;
  }

  document.getElementById("loginBtn").onclick = async () => {
    const passcode = document.getElementById("passcodeInput").value.trim();
    if (!passcode) return alert("Please enter a username!");
    currentPasscode = passcode;
    document.getElementById("usernameDisplay").innerText = "Logged in as: " + currentPasscode;
    await loadScores(passcode);
    enableButtons();
    document.getElementById("loginDiv").style.display = "none"; // hide login
  };

  async function loadScores(passcode) {
    const ref = doc(db, "players", passcode);
    const snapshot = await getDoc(ref);
    if (snapshot.exists()) {
      scores = snapshot.data();
      updateDisplay();
      console.log("Loaded existing player", passcode, scores);
    } else {
      await setDoc(ref, scores);
      console.log("New player created:", passcode);
    }
  }

  async function saveScores() {
    if (!currentPasscode) return;
    try {
      const ref = doc(db, "players", currentPasscode);
      await setDoc(ref, scores);
    } catch (e) {
      console.error("Save failed:", e);
    }
  }

  window.addPoints = (skill, points) => {
    scores[skill] += points;
    updateDisplay();
    saveScores();
  };

  window.resetScores = () => {
    for (const skill in scores) scores[skill] = 0;
    updateDisplay();
    saveScores();
  };

  function updateDisplay() {
    document.getElementById("Restorationscore").innerText = scores.Restoration;
    document.getElementById("AlchemyScore").innerText = scores.Alchemy;
    document.getElementById("ConjurationScore").innerText = scores.Conjuration;
    document.getElementById("Strengthscore").innerText = scores.Strength;
    document.getElementById("IntelligenceScore").innerText = scores.Intelligence;
    document.getElementById("WillpowerScore").innerText = scores.Willpower;
    document.getElementById("Agilityscore").innerText = scores.Agility;
    document.getElementById("SpeedScore").innerText = scores.Speed;
    document.getElementById("EnduranceScore").innerText = scores.Endurance;
    document.getElementById("Personalityscore").innerText = scores.Personality;
    document.getElementById("LuckScore").innerText = scores.Luck;
    document.getElementById("AlterationScore").innerText = scores.Alteration;
    document.getElementById("AthleticsScore").innerText = scores.Athletics;
    document.getElementById("DestructionScore").innerText = scores.Destruction;
    document.getElementById("IllusionScore").innerText = scores.Illusion;
    document.getElementById("MysticismScore").innerText = scores.Mysticism;
    document.getElementById("CharismaScore").innerText = scores.Charisma;
    document.getElementById("EnergyScore").innerText = scores.Energy;
  }
</script>

</body>
</html>
